# 💭 Q&A 챗봇

Google Gemini 임베딩과 Qdrant 벡터DB를 활용해  
질문에 가장 적합한 답변을 찾아주는 Q&A 챗봇입니다.

---

## 🌐 배포 URL
> https://qna-chatbot-task.vercel.app/

---

## 🧩 기술 스택

| 구분 | 사용 기술 |
|------|-----------|
| Frontend | Next.js |
| Backend | Next.js Route Handler |
| Embedding | Google Gemini Embedding API |
| Vector DB | Qdrant |
| 배포 | Vercel (GitHub 자동 배포 연동) |

<br>
  
**선정 이유**  
Next.js 와 Vercel을 함께 사용하여 개발과 배포의 효율을 높였습니다.  
Qdrant는 구축이 간단하고 직관적이라 짧은 시간 안에 안정적인 환경을   
구현하기 적합하다는 생각에 선택하였습니다.

---

## 🧠 벡터 DB 및 임베딩 방식

- **모델:** `gemini-embedding-001`  
- **차원 수:** 3072
- **거리 계산 방식:** Cosine Similarity  

Q/A 데이터의 질문을 임베딩하여 해당 벡터와 답변을 Qdrant 컬렉션에 매핑해 저장하였습니다.  
검색 시에도 동일한 모델로 사용자의 질문을 임베딩하여 벡터 공간을 맞춘 뒤,  
코사인 유사도가 가장 높은 항목의 답변을 반환합니다.

---

## 🎯 정확도 향상 전략

1. **동일 모델 유지**  
   Q/A 데이터와 사용자의 질문을 모두 동일한 모델(`gemini-embedding-001`)과  
   차원(3072)으로 임베딩 하여 벡터 공간을 일치시켰습니다.

2. **유사도 기준값 조정**  
   지나치게 높은 기준값(0.75 이상)은 유연한 질의 대응을 방해하였기 때문에,  
   0.65로 조정해 다양한 토막의 질문에도 적합한 답변을 반환하도록 했습니다.

3. **환각 방지**  
   환각 현상을 방지하기 위해, 정해진 Q/A 데이터 셋에서만 답변을 조회하도록
   하였습니다. 또한, 검색된 답변이 없다면 고정된 안내 문구만 반환하도록 하였습니다.

4. **거리 계산 방식**  
   Cosine 유사도를 사용해 의미 기반 비교가 가능하도록 설정하였습니다.

5. **차원 수 확장**  
   임베딩 벡터의 차원을 높게 설정하여 문장의 의미를 더 세밀하게 표현하고,  
   유사 문장 간의 구분력을 향상시켰습니다.


---

## 📂 주요 코드 구조

| 파일 | 설명 | 링크 |
|------|------|------|
| `/app/api/route.js` | 질문 임베딩 → Qdrant 검색 로직 | [보기](app/api/route.js) |
| `/scripts/seed.js` | 엑셀 데이터 → Qdrant 초기 시드 업로드 | [보기](scripts/seed.js) |
| `/app/page.js` | UI 및 사용자 입력 처리 | [보기](app/page.js) |

---

## 🧩 실행 흐름 요약

1. `seed.js` 최초 1번 실행 → Q/A 데이터를 임베딩 후 Qdrant에 저장  
2. 사용자가 질문 입력  
3. `route.js`에서 입력 질문을 임베딩 후 Qdrant에 검색  
4. 가장 유사한 질문을 찾은 후 같이 묶여있는 답변 반환
5. 답변 화면 출력  






